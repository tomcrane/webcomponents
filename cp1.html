<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Canvas panel 1</title>
    <link href="style-common.css" rel="stylesheet">
    <script src="cp-common.js"></script>
    <script src="cp1.js"></script>
</head>

<body>

    <h2>Canvas Panel Developer Narrative - Version 1</h2>

    <p><a href=".">Intro</a> | Version 1 | <a href="cp2.html">Version 2</a> | <a href="viewer1.html">Viewer 1</a></p>

<p><b>Design principle:</b> work against the latest IIIF specification (Presentation 3) and normalise incoming resources to this specification, rather than accommodating different versions of the spec throughout the codebase, that would conditional behaviour throughout.</p>


<p>This is how I would want to use CP. I want it to behave like a div, so I can treat it like other divs in my application, style it, apply predictable CSS to it, etc. So here the web component is a <i>Customized built-in element</i>, rather than an <i>Autonomous custom element</i> (following the definitions given on <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements#High-level_view">MDN</a>).</p>

<xmp>
    <div is="canvas-panel-1" id="cp1" class="canvaspanel" 
        data-canvas-uri="https://wellcomelibrary.org/iiif/b18035723/canvas/c8"
        data-partof-uri="https://tomcrane.github.io/webcomponents/wunder.json">
    </div>

</xmp>

<p>It's a div tag, extended with the <code>canvas-panel-1</code> behaviour.</p>
       
    <p>In this type of usage, CP is entirely declarative. It needs to go off and load things under the hood.
        In this case it will need to load the manifest, then find the canvas in it, then render the canvas.

        To be useful for people who want to do this, CP needs to have all the normalisation to P3 <i>built in</i>.
        The resources at the other end of those attribute values could be Presentation 2 manifests and canvases; used like this, CP will have to manage the conversion to Presentation 3 itself.
    </p>
    <p>
        Maybe I don't know what's on this canvas. I don't even know if it has an image, image with tilesource, multiple images, Choice,
        Audio, Video, text.

        As my viewer gets more sophisticated, I want to deal with more potential IIIF content. If I want a component like this to 
        insert that content into a page, I don't want different components for different types of content.</p>

    <p>The thing you are setting the size of in the <a href="style-common.css">linked CSS</a> isn't a canvas.

        You probably don't know how big the canvas is at this point. It's a <b>viewport</b> - the space in which
        canvas panel is free to render the canvas (or part of it).</p>

<xmp>
 <style>
    .canvaspanel {
        width: 600px;
        height: 600px;
        padding:2px;
        border:1px solid green;
        background-color:black;
    }
 </style>

 <div is="canvas-panel-1" id="cp1" class="canvaspanel" 
     data-canvas-uri="https://wellcomelibrary.org/iiif/b18035723/canvas/c8"
     data-partof-uri="https://tomcrane.github.io/webcomponents/wunder.json">
 </div>

</xmp>

    <div is="canvas-panel-1" id="cp1" class="canvaspanel" 
        data-canvas-uri="https://wellcomelibrary.org/iiif/b18035723/canvas/c8"
        data-partof-uri="https://tomcrane.github.io/webcomponents/wunder.json">
    </div>

    <p>This is a 600 by 600 pixel div, rendering the canvas I have given it.</p>

    <p>I haven't written any code here to respond to anything on that canvas that might need
        a user interaction to provide the full rendering - a Choice annotation. And I can't step in to deal with user interactions in the canvas, such as a click on a linking annotation.
    </p>
    <p> Another example:</p>

<xmp>
    <div is="canvas-panel-1" id="cp1" class="canvaspanel" 
        data-canvas-uri="https://wellcomelibrary.org/iiif/b22047347/canvas/c24"
        data-partof-uri="https://tomcrane.github.io/webcomponents/wunder.json">
    </div>

</xmp>

    <div is="canvas-panel-1" id="cp1" class="canvaspanel" 
        data-canvas-uri="https://wellcomelibrary.org/iiif/b22047347/canvas/c24"
        data-partof-uri="https://tomcrane.github.io/webcomponents/wunder.json">
    </div>

    <p>The red border is part of this demo Canvas Panel's rendering. You'd probably control whether it was visible, usually not, but I'm showing
        it here to indicate the shape of the canvas that is being shown in this viewport.
    </p>
    <p>While the component shown here would be very useful, I don't think this is Canvas Panel.
        This feels like a component that's a light wrapper around CP - taking the attributes and then loading the resources, like this:
    </p>

<xmp>
    <div is="iiif-resource-loader" id="ir1" class="canvaspanel" 
        data-canvas-uri="https://wellcomelibrary.org/iiif/b22047347/canvas/c24"
        data-partof-uri="https://tomcrane.github.io/webcomponents/wunder.json">
    </div>

</xmp>

    <p>or...</p>

<xmp>
    <div is="iiif-resource-loader" id="ir1" class="canvaspanel" 
        data-canvas-uri="https://wellcomelibrary.org/iiif/b22047347/canvas/c24"
        data-partof-uri="https://tomcrane.github.io/webcomponents/wunder.json" 
        data-xywh="100,500,300,1000">
    </div>

</xmp>


<p>In that second example I want the viewport to show a particular region of the canvas.</p>

<p>The existing React implementation of Canvas Panel lets you do something just like this:
<br/><br/>
<a href="https://codesandbox.io/s/o4nq2rkvo5">View in Sandbox</a>

</p>

    <p>Or, you would initialise it with an annotation as per
        <a href="https://docs.google.com/document/d/1LKhEWWuYF-8KLkKcW_u2GlvX0epohwc7OYOVjICie5M">Import
            to viewers</a>.</p>

            <p>The <code>iiif-resource-loader</code> web component isn't CP, then, but a thin wrapper around it. So what is CP?</p>

    <p>On to <a href="cp2.html">Version 2</a></p>

    
    <hr/>
    <p><a href="https://github.com/tomcrane/webcomponents">View on GitHub</a></p>
</body>

</html>