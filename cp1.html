<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Digirati Canvas Panel - Developer Stories 1</title>
    <link rel="stylesheet" href="style-common.css">    
    <link rel="stylesheet" href="highlight/styles/github.css">
    <script src="highlight/highlight.pack.js"></script>
    <script src="cp-common.js"></script>
    <script src="cp1.js"></script>
</head>

<body>

    <h2>Canvas Panel Developer Narrative - Version 1</h2>

    <p><a href=".">Intro</a> | Version 1 | <a href="cp2.html">Version 2</a> | <a href="viewer1.html">Viewer 1</a> | <a href="collaboration.html">Collaboration</a></p>

<p>First, a <i>Design principle</i> for Canvas Panel: </p>
    
    <blockquote>
    Work with the latest IIIF specification (Presentation 3) and 
    <b><i>normalise</i></b> incoming resources to this specification, rather than 
    accommodating different versions of the spec throughout the codebase.
</blockquote> 

<blockquote>
    Canvas Panel is to a IIIF Canvas as OSD is to a deep zoom tile source. 
    (This principle doesn't quite hold; you can pass multiple tile sources to OSD).
</blockquote>


<p>This is how I would want to use CP. I want it to behave like a <code>div</code>, 
    so I can treat it like other divs in my application, style it, apply predictable 
    CSS to it, etc. So here the web component is a <i>Customized built-in element</i>, 
    rather than an <i>Autonomous custom element</i> (following the definitions 
    given at 
    <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements#High-level_view">MDN</a>).
</p>

<p>My first thought is to just feed it canvases, that probably live in manifests:</p>

<pre><code class="html">  &lt;div is=&quot;canvas-panel-1&quot; id=&quot;cp1&quot; class=&quot;canvaspanel&quot;    
    data-canvas-uri=&quot;https://wellcomelibrary.org/iiif/b18035723/canvas/c8&quot;       
    data-partof-uri=&quot;https://tomcrane.github.io/webcomponents/wunder.json&quot;&gt;   
  &lt;/div&gt;
</code></pre>

<p>It's a div tag, extended with the <code>canvas-panel-1</code> behaviour.</p>
       
    <p>In this type of usage, CP is entirely declarative. It needs to go off and load things under the hood.
        In this case it will need to load the manifest, then find the canvas in it, then render the canvas.

        To be useful for people who want to do this, CP needs to have all the normalisation to P3 <i>built in</i>.
        The resources at the other end of those attribute values could be Presentation 2 manifests and canvases; 
        used like this, CP will have to manage the conversion to Presentation 3 itself.
    </p>
    <p>
        Maybe I don't know what's on this canvas. I don't even know if it has an image, image with tilesource, 
        multiple images, Choice, Audio, Video, text.

        As my viewer gets more sophisticated, I want to deal with more potential IIIF content. If I want a component like this to 
        insert that content into a page, I don't want different components for different types of content.
        This declarative component would be good for that.
    </p>

    <p>The thing you are setting the size of in the <a href="style-common.css">linked CSS</a> isn't a canvas.

        You probably don't know how big or what shape the canvas is at this point.
        The component is a <b>viewport</b> - the space in which
        canvas panel is free to render the canvas (or part of it).</p>

<pre><code class="html">&lt;style&gt;    
    .canvaspanel {        
        width: 600px;        
        height: 600px;        
        padding:2px;        
        border:1px solid green;        
        background-color:black;    
    } 
&lt;/style&gt; 
    
&lt;div is=&quot;canvas-panel-1&quot; id=&quot;cp1&quot; class=&quot;canvaspanel&quot;
    data-canvas-uri=&quot;https://wellcomelibrary.org/iiif/b18035723/canvas/c8&quot;
    data-partof-uri=&quot;https://tomcrane.github.io/webcomponents/wunder.json&quot;&gt; 
&lt;/div&gt;
</code></pre>

    <div is="canvas-panel-1" id="cp1" class="canvaspanel" 
        data-canvas-uri="https://wellcomelibrary.org/iiif/b18035723/canvas/c8"
        data-partof-uri="https://tomcrane.github.io/webcomponents/wunder.json">
    </div>

    <p>This is a 600 by 600 pixel div, rendering the canvas I have given it.</p>

    <p>I haven't written any code here to respond to anything on that canvas that might need
        a user interaction to provide the full rendering - e.g., a Choice annotation. 
        And I can't step in to deal with user interactions in the canvas, such as a click on a linking annotation.
    </p>
    <p> Another example:</p>

<pre><code class="html"> &lt;div is=&quot;canvas-panel-1&quot; id=&quot;cp1&quot; class=&quot;canvaspanel&quot;
    data-canvas-uri=&quot;https://wellcomelibrary.org/iiif/b22047347/canvas/c24&quot;
    data-partof-uri=&quot;https://tomcrane.github.io/webcomponents/wunder.json&quot;&gt; 
 &lt;/div&gt;
</code></pre>

    <div is="canvas-panel-1" id="cp1" class="canvaspanel" 
        data-canvas-uri="https://wellcomelibrary.org/iiif/b22047347/canvas/c24"
        data-partof-uri="https://tomcrane.github.io/webcomponents/wunder.json">
    </div>

    <p>The red border is part of this demo Canvas Panel's rendering. You'd probably control whether 
        it was visible (usually not) but I'm showing
        it here to indicate the shape of the canvas that is being shown in this viewport.
    </p>
    <p>While the component shown here would be very useful, <i>I don't think this is Canvas Panel.</i>
        This feels like a component that's a light wrapper around CP - taking the attributes and then 
        loading the resources, like this:
    </p>

<pre><code class="html"> &lt;div is=&quot;iiif-resource-loader&quot; id=&quot;ir1&quot; class=&quot;canvaspanel&quot;
    data-canvas-uri=&quot;https://wellcomelibrary.org/iiif/b22047347/canvas/c24&quot;
    data-partof-uri=&quot;https://tomcrane.github.io/webcomponents/wunder.json&quot;&gt; 
 &lt;/div&gt;
</code></pre>

    <p>or...</p>

<pre><code class="html"> &lt;div is=&quot;iiif-resource-loader&quot; id=&quot;ir1&quot; class=&quot;canvaspanel&quot;
    data-canvas-uri=&quot;https://wellcomelibrary.org/iiif/b22047347/canvas/c24&quot;
    data-partof-uri=&quot;https://tomcrane.github.io/webcomponents/wunder.json&quot; 
    data-xywh=&quot;100,500,300,1000&quot;&gt;
 &lt;/div&gt;
</code></pre>

<p>In that second example I want the viewport to show a particular region of the canvas.</p>

<p>The existing <a href="https://canvas-panel.digirati.com/styleguide/">React implementation</a>
     of Canvas Panel lets you do something just like this:</p>

<pre><code class="html"> &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;
 &lt;div class=&quot;canvaspanel&quot;&gt;
 &lt;div id=&quot;viewer&quot; 
     data-element=&quot;canvas-panel-viewer&quot; 
     data-manifest=&quot;https://wellcomelibrary.org/iiif/b18035723/manifest&quot;
     data-canvas=&quot;https://wellcomelibrary.org/iiif/b18035723/canvas/c8&quot;&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;script src=&quot;//unpkg.com/@canvas-panel/viewer-element@0.0.9/umd/@canvas-panel/viewer-element.min.js&quot;&gt;&lt;/script&gt;
</code></pre>

<p>
<a href="https://codesandbox.io/s/o4nq2rkvo5">View in Sandbox</a>
</p>

    <p>Or, you would initialise it with an annotation as discussed in the
        <a href="https://docs.google.com/document/d/1LKhEWWuYF-8KLkKcW_u2GlvX0epohwc7OYOVjICie5M">Import
            to viewers</a> proposal.</p>
    <p>The <code>iiif-resource-loader</code> web component isn't Canvas Panel, then, but a thin wrapper around it. 
        A useful component in its own right, but something else. So what is Canvas Panel?</p>

    <p>On to <a href="cp2.html">Version 2</a></p>

    
    <hr/>
    <p><a href="https://github.com/digirati-co-uk/canvas-panel/tree/master/developer-stories">View on GitHub</a></p>

    <script>hljs.initHighlightingOnLoad();</script>
</body>

</html>